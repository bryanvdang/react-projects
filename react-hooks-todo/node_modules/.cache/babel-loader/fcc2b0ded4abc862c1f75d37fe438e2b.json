{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useReducer, useCallback } from 'react'; //we don't need to import react itself because we're not building a react component here.\n//A hook is not a react component. We just want to use some react packages such as 'useReducer()'\n//here we're using reducer to manager our state to reflect the UI, we're not actually sending the state. Only thing we want to display is loading icon or an error\n\nconst httpReducer = (currentHttpState, action) => {\n  //what 3 scenarios do you get when running an HTTP request? Hence the switch cases\n  switch (action.type) {\n    case 'SEND':\n      return {\n        isLoading: true,\n        error: null,\n        data: null\n      };\n\n    case 'RESPONSE':\n      return { ...currentHttpState,\n        isLoading: false,\n        data: action.responseData\n      };\n\n    case 'ERROR':\n      return {\n        loading: true,\n        error: action.errorMessage\n      };\n\n    case 'CLEAR':\n      return { ...currentHttpState,\n        error: null\n      };\n\n    default:\n      throw new Error('Should not get here');\n  }\n}; //define the reducer outside the function because we don't want it to\n//rerun on every render cycle. \n//your hook will get called whenever the component where you're using the\n//hook gets executed\n\n\nconst useHttp = () => {\n  _s();\n\n  const [httpState, dispatchHttp] = useReducer(httpReducer, {\n    isLoading: false,\n    error: null,\n    data: null\n  }); // const [isLoading, setIsLoading] = useState(false);\n  // const [error, setError] = useState();\n  //only need headers for post, but doesn't hurt to put it in for a GET\n\n  const sendRequest = useCallback((url, method, body) => {\n    dispatchHttp({\n      type: 'SEND'\n    });\n    fetch(url, {\n      method: method,\n      body: body,\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(response => {\n      return response.json();\n    }).then(responseData => {\n      dispatchHttp({\n        type: 'RESPONSE',\n        responseData: responseData\n      }); // setIsLoading(false);\n      // setUserIngredients(previousIngredient => {\n      //   previousIngredient.filter(ingredient => ingredient.id !== ingredientId);\n      // });\n      // dispatch({ type: 'DELETE', id: ingredientId});\n    }).catch(error => {\n      dispatchHttp({\n        type: 'ERROR',\n        errorMessage: 'Something went wrong'\n      }); // setError(error.message);\n      // setIsLoading(false);\n    });\n  }); // `https://react-hooks-update-77b76-default-rtdb.firebaseio.com/ingredients/${ingredientId}.json`\n\n  return {\n    isLoading: httpState.loading,\n    data: httpState.data,\n    error: httpState.error,\n    sendRequest: sendRequest\n  };\n};\n\n_s(useHttp, \"cK4CxoXetesu8Xqo5IHx+gpdIQY=\");\n\nexport default useHttp;","map":{"version":3,"sources":["E:/App Development/React/react-projects/react-hooks-todo/src/hooks/http.js"],"names":["useReducer","useCallback","httpReducer","currentHttpState","action","type","isLoading","error","data","responseData","loading","errorMessage","Error","useHttp","httpState","dispatchHttp","sendRequest","url","method","body","fetch","headers","then","response","json","catch"],"mappings":";;AAAA,SAASA,UAAT,EAAqBC,WAArB,QAAwC,OAAxC,C,CAEA;AACA;AAIA;;AACA,MAAMC,WAAW,GAAG,CAACC,gBAAD,EAAmBC,MAAnB,KAA8B;AAC9C;AACA,UAAQA,MAAM,CAACC,IAAf;AACI,SAAK,MAAL;AACA,aAAO;AAAEC,QAAAA,SAAS,EAAE,IAAb;AAAmBC,QAAAA,KAAK,EAAE,IAA1B;AAAgCC,QAAAA,IAAI,EAAE;AAAtC,OAAP;;AACA,SAAK,UAAL;AACA,aAAO,EAAE,GAAGL,gBAAL;AAAuBG,QAAAA,SAAS,EAAE,KAAlC;AAAyCE,QAAAA,IAAI,EAAEJ,MAAM,CAACK;AAAtD,OAAP;;AACA,SAAK,OAAL;AACA,aAAO;AAAEC,QAAAA,OAAO,EAAE,IAAX;AAAiBH,QAAAA,KAAK,EAAEH,MAAM,CAACO;AAA/B,OAAP;;AACA,SAAK,OAAL;AACA,aAAO,EAAE,GAAGR,gBAAL;AAAuBI,QAAAA,KAAK,EAAE;AAA9B,OAAP;;AACA;AACA,YAAM,IAAIK,KAAJ,CAAU,qBAAV,CAAN;AAVJ;AAYH,CAdD,C,CAiBA;AACA;AAEA;AACA;;;AACA,MAAMC,OAAO,GAAG,MAAM;AAAA;;AAClB,QAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4Bf,UAAU,CAACE,WAAD,EAAc;AACtDI,IAAAA,SAAS,EAAE,KAD2C;AAEtDC,IAAAA,KAAK,EAAE,IAF+C;AAGtDC,IAAAA,IAAI,EAAE;AAHgD,GAAd,CAA5C,CADkB,CAMlB;AACA;AAEJ;;AACI,QAAMQ,WAAW,GAAGf,WAAW,CAAC,CAACgB,GAAD,EAAMC,MAAN,EAAcC,IAAd,KAAuB;AACnDJ,IAAAA,YAAY,CAAC;AAACV,MAAAA,IAAI,EAAE;AAAP,KAAD,CAAZ;AACAe,IAAAA,KAAK,CACDH,GADC,EAED;AACEC,MAAAA,MAAM,EAAEA,MADV;AAEEC,MAAAA,IAAI,EAAEA,IAFR;AAGEE,MAAAA,OAAO,EAAE;AACL,wBAAgB;AADX;AAHX,KAFC,CAAL,CASIC,IATJ,CASSC,QAAQ,IAAI;AACf,aAAOA,QAAQ,CAACC,IAAT,EAAP;AACH,KAXH,EAYGF,IAZH,CAYQb,YAAY,IAAI;AACpBM,MAAAA,YAAY,CAAC;AAACV,QAAAA,IAAI,EAAE,UAAP;AAAmBI,QAAAA,YAAY,EAAEA;AAAjC,OAAD,CAAZ,CADoB,CAEpB;AACA;AACA;AACA;AACA;AACD,KAnBH,EAmBKgB,KAnBL,CAmBWlB,KAAK,IAAI;AAChBQ,MAAAA,YAAY,CAAC;AAACV,QAAAA,IAAI,EAAE,OAAP;AAAgBM,QAAAA,YAAY,EAAE;AAA9B,OAAD,CAAZ,CADgB,CAEhB;AACA;AACD,KAvBH;AAwBH,GA1B8B,CAA/B,CAVkB,CAsClB;;AAGA,SAAO;AACHL,IAAAA,SAAS,EAAEQ,SAAS,CAACJ,OADlB;AAEHF,IAAAA,IAAI,EAAEM,SAAS,CAACN,IAFb;AAGHD,IAAAA,KAAK,EAAEO,SAAS,CAACP,KAHd;AAIHS,IAAAA,WAAW,EAAEA;AAJV,GAAP;AAMH,CA/CD;;GAAMH,O;;AAiDN,eAAeA,OAAf","sourcesContent":["import { useReducer, useCallback } from 'react';\r\n\r\n//we don't need to import react itself because we're not building a react component here.\r\n//A hook is not a react component. We just want to use some react packages such as 'useReducer()'\r\n\r\n\r\n\r\n//here we're using reducer to manager our state to reflect the UI, we're not actually sending the state. Only thing we want to display is loading icon or an error\r\nconst httpReducer = (currentHttpState, action) => {\r\n    //what 3 scenarios do you get when running an HTTP request? Hence the switch cases\r\n    switch (action.type) {\r\n        case 'SEND':\r\n        return { isLoading: true, error: null, data: null };\r\n        case 'RESPONSE':\r\n        return { ...currentHttpState, isLoading: false, data: action.responseData };\r\n        case 'ERROR':\r\n        return { loading: true, error: action.errorMessage };\r\n        case 'CLEAR':\r\n        return { ...currentHttpState, error: null };\r\n        default:\r\n        throw new Error('Should not get here');\r\n    }\r\n}\r\n\r\n\r\n//define the reducer outside the function because we don't want it to\r\n//rerun on every render cycle. \r\n\r\n//your hook will get called whenever the component where you're using the\r\n//hook gets executed\r\nconst useHttp = () => {\r\n    const [httpState, dispatchHttp] = useReducer(httpReducer, { \r\n        isLoading: false, \r\n        error: null,\r\n        data: null\r\n     });\r\n    // const [isLoading, setIsLoading] = useState(false);\r\n    // const [error, setError] = useState();\r\n  \r\n//only need headers for post, but doesn't hurt to put it in for a GET\r\n    const sendRequest = useCallback((url, method, body) => {\r\n        dispatchHttp({type: 'SEND'})\r\n        fetch(\r\n            url, \r\n            {\r\n              method: method,\r\n              body: body,\r\n              headers: {\r\n                  'Content-Type': 'application/json'\r\n              }\r\n            }\r\n          ).then(response => {\r\n              return response.json(); \r\n          })\r\n          .then(responseData => {\r\n            dispatchHttp({type: 'RESPONSE', responseData: responseData});\r\n            // setIsLoading(false);\r\n            // setUserIngredients(previousIngredient => {\r\n            //   previousIngredient.filter(ingredient => ingredient.id !== ingredientId);\r\n            // });\r\n            // dispatch({ type: 'DELETE', id: ingredientId});\r\n          }).catch(error => {\r\n            dispatchHttp({type: 'ERROR', errorMessage: 'Something went wrong'});\r\n            // setError(error.message);\r\n            // setIsLoading(false);\r\n          });\r\n    });\r\n\r\n    // `https://react-hooks-update-77b76-default-rtdb.firebaseio.com/ingredients/${ingredientId}.json`\r\n\r\n\r\n    return {\r\n        isLoading: httpState.loading,\r\n        data: httpState.data,\r\n        error: httpState.error,\r\n        sendRequest: sendRequest\r\n    };\r\n};\r\n\r\nexport default useHttp;"]},"metadata":{},"sourceType":"module"}